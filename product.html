<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Product page</title>
    <style>
        body {
            font-family: Inter;
            background: #eee
        }

        .page {
            max-width: 900px;
            margin: 40px auto;
            background: #fff;
            padding: 20px
        }

        .row {
            display: flex;
            gap: 20px
        }

        img {
            width: 300px
        }

        .review {
            border-top: 1px solid #ddd;
            padding: 5px
        }
    </style>
</head>

<body>

    <div class="page">
        <button onclick="history.back()">← Back</button>
        <div id="box"></div>
    </div>

    <script>
        const id = new URLSearchParams(location.search).get("id");
        const local = JSON.parse(localStorage.getItem("products")) || [];

        const lp = local.find(p => p.id == id);

        if (lp) draw(lp);
        else fetch(`https://dummyjson.com/products/${id}`).then(r => r.json()).then(draw);

        function draw(p) {

            box.innerHTML = `
<div class="row">
<img src="${p.thumbnail}">
<div>
<h2>${p.title}</h2>
<p>${p.description}</p>
<b>$${p.price}</b>
<p>Brand: ${p.brand||""}</p>
<p>Stock: ${p.stock||""}</p>
</div>
</div>

<h3>Reviews</h3>
${(p.reviews||[]).map(r=>`
<div class="review">⭐${r.rating} ${r.reviewerName}<br>${r.comment}</div>`).join("")}
`;
        }

        const box = document.getElementById("box");
    </script>

</body>

</html>